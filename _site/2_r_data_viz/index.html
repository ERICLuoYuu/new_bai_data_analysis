<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>  Data Visualization Intro - Data Analysis for Ecologists</title>
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">


  <meta name="author" content="Nicolas Behrens">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Data Analysis for Ecologists">
<meta property="og:title" content="  Data Visualization Intro">
<meta property="og:url" content="http://localhost:4000/2_r_data_viz/">


  <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">












<link rel="canonical" href="http://localhost:4000/2_r_data_viz/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Data Analysis for Ecologists Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Data Analysis for Ecologists
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/python_0_landing_page">Python for Ecologists</a>
            </li><li class="masthead__menu-item">
              <a href="/0_r_landing_page/">R for Ecologists</a>
            </li><li class="masthead__menu-item">
              <a href="/about">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="http://localhost:4000/">
        <img src="/assets/images/bio-photo.jpg" alt="Nicolas Behrens" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">Nicolas Behrens</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>I am a Geoscientist, Java developer and now Ecology PhD-candidate. I love programming, working with time series data and being in my beautiful peatland research sites where I investigate controls on greenhouse gas emissions from peat soils.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li><a href="https://github.com/nicbehr" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/1_r_basics/"><span class="nav__sub-title">Basics of R</span></a>
        

        
      </li>
    
      <li>
        
          <a href="/2_r_data_viz/"><span class="nav__sub-title">Data Visualization</span></a>
        

        
      </li>
    
      <li>
        
          <a href="/3_r_interp_gapfil/"><span class="nav__sub-title">Interpolation and Gap Filling</span></a>
        

        
      </li>
    
      <li>
        
          <a href="/4_r_extreme_detection/"><span class="nav__sub-title">Extreme Value Detection</span></a>
        

        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="  Data Visualization Intro">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/2_r_data_viz/" class="u-url" itemprop="url"><ol>
  <li>Data Visualization Intro</li>
</ol>
</a>
          </h1>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <p>In this exercise we will look at the basics of how to load datasets, prepare the data for visualization
and use the common ggplot-library for plotting</p>

<p>First of all, download the .csv data files and put them in the same folder
as this script.<br />
<a href="data.zip">Data Download</a></p>

<p>Then use this command to set the working directoy to the directory you have the script in:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setwd</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path_to_your_script</span><span class="o">&gt;</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>If you are on Windows you will have to replace all \ with / !!</p>

<p>Now you can install the following packages, if they are not alread installed:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"ggplot2"</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"dplyr"</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"openair"</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"reshape2"</span><span class="p">)</span><span class="w">

</span><span class="c1"># next up we load the packages for later use:</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h3 id="1-loading-and--converting-data">1. Loading and  Converting Data:</h3>

<p>First we read in data:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_site</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"data_site.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">data_dwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"data_dwd.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>We convert the date from a simple string to a datetime object so R can work with it. Datetime objects
are super convenient because other than with a simple string they bring a load of functionality, allowing
you to e.g. filter based on months or years, add or subtract time offsets and much more.</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_dwd</span><span class="o">$</span><span class="n">datetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="n">data_dwd</span><span class="o">$</span><span class="n">datetime</span><span class="p">)</span><span class="w">
</span><span class="n">data_dwd_short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_dwd</span><span class="p">[</span><span class="n">data_dwd</span><span class="o">$</span><span class="n">datetime</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">head</span><span class="p">(</span><span class="n">data_site</span><span class="o">$</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w">
                            </span><span class="n">data_dwd</span><span class="o">$</span><span class="n">datetime</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">tail</span><span class="p">(</span><span class="n">data_site</span><span class="o">$</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">=</span><span class="m">1</span><span class="p">),]</span><span class="w">
</span></code></pre></div></div>
<p>Now we aggregate the site data to daily values:
First create a new dataset for it, we don’t want to loose any data:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_site_daily</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site</span><span class="w">
</span></code></pre></div></div>
<p>Now we simply remove the time by converting the datetime to a date with as.Date()</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_site_daily</span><span class="o">$</span><span class="n">datetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="n">data_site_daily</span><span class="o">$</span><span class="n">datetime</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>The datetime column now looks like this:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="m">2020-09-30</span><span class="w">
</span><span class="m">2020-09-30</span><span class="w">
</span><span class="n">...</span><span class="w">
</span></code></pre></div></div>

<p>With that we can use the “dplyr” package to aggregate the data to daily values:<br />
the %&gt;% operator just concatenates different operations
so we take the original dataset and group it by the column datetime
to aggregate the data we use the dplyr package and from that the summarize_if() 
function. For one we can specify that we only want to aggregate the numeric columns,
which excludes the datetime column. We don’t want to sum up the dates!<br />
Secondly we pass the way we want to aggregate the data, which is the mean for 
most columns:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_site_daily_aggr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site_daily</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">datetime</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">summarize_if</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">as.data.frame</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>
<p>For rainfall taking the mean does not make sense, we want to have the sum of the
rainfall as aggregated values. To get these, we can use basically the same syntax,
only switching up the summarize_if() for summarize() and the mean for the sum().</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">site_precip_daily</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site_daily</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">datetime</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">summarize</span><span class="p">(</span><span class="n">RR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">RR</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">as.data.frame</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>
<p>Now we can just set the precipitation column in our aggregated data to our just 
derived column:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_site_daily_aggr</span><span class="o">$</span><span class="n">RR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">site_precip_daily</span><span class="o">$</span><span class="n">RR</span><span class="w">
</span></code></pre></div></div>

<h3 id="2-plotting">2. Plotting:</h3>

<h4 id="21-line-plots">2.1 Line Plots</h4>
<p>First here are a few examples of classic line plots, as you have already seen them
in the tutorial. I added a bunch of customization so you can grab from it, whatever
you need later for your own plots:
First a line plot of temperature data for one site:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T_figure_single</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">()</span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_dwd_short</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T2M</span><span class="p">))</span><span class="o">+</span><span class="w"> 
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"T [°C]"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_date</span><span class="p">(</span><span class="n">date_breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3 months"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">date_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"%b-%y"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Temperature"</span><span class="p">,</span><span class="w"> </span><span class="n">subtitle</span><span class="o">=</span><span class="s2">"at DWD station Ahaus"</span><span class="p">)</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">T_figure_single</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>now we add another line to the same plot and add some legends to it,
to make clear which line is what. You can try around and change the colors
of the lines or the title of the legend in the scale_color_manual() function</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T_figure_multiple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">()</span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_dwd_short</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T2M</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"DWD"</span><span class="p">))</span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site_daily_aggr</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Site"</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_color_manual</span><span class="p">(</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s2">"Source"</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"DWD"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Site"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"T [°C]"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_date</span><span class="p">(</span><span class="n">date_breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3 months"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">date_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"%b-%y"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Temperature"</span><span class="p">,</span><span class="w"> </span><span class="n">subtitle</span><span class="o">=</span><span class="s2">"at DWD station Ahaus and site Amtsvenn"</span><span class="p">)</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">T_figure_multiple</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>note the super handy “scale_x_date()” function, that makes the x-scale more 
readable with a super handy function. Compare the x-axis in this graph with 
the previous one.</p>

<p>Now lets do the same for relative humidity:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">RF_figure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">()</span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_dwd_short</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RF</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s2">"DWD"</span><span class="p">))</span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site_daily_aggr</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">RF</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Site"</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_color_manual</span><span class="p">(</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s2">"Source"</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"DWD"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Site"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">))</span><span class="o">+</span><span class="w">
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"relative humidity [%]"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_date</span><span class="p">(</span><span class="n">date_breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3 months"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">date_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"%b-%y"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Relative humidity"</span><span class="p">,</span><span class="w"> </span><span class="n">subtitle</span><span class="o">=</span><span class="s2">"at DWD station Ahaus and site Amtsvenn"</span><span class="p">)</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">RF_figure</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>You can just grab the above code, and create the same plot for precipitation.
Just copy-paste the code, change the labels and title and your done!</p>

<p>One way to see whether the two sites are comparable is to look at the differences
between the values at both sites. Therefore we first create a new dataframe with
the differences and then plott the data in a simple plot - here is one example
for temperature:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T_diff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="w">
  </span><span class="n">datetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_dwd_short</span><span class="o">$</span><span class="n">datetime</span><span class="p">,</span><span class="w">
  </span><span class="n">T_diff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_dwd_short</span><span class="o">$</span><span class="n">T2M</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">data_site_daily_aggr</span><span class="o">$</span><span class="nb">T</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">T_diff_figure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">()</span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_diff</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T_diff</span><span class="p">))</span><span class="o">+</span><span class="w"> 
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Temperature difference [°C]"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_date</span><span class="p">(</span><span class="n">date_breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3 months"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">date_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"%b-%y"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"T diff"</span><span class="p">,</span><span class="w"> </span><span class="n">subtitle</span><span class="o">=</span><span class="s2">"between DWD station Ahaus and site Amtsvenn"</span><span class="p">)</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">T_diff_figure</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Now you can do the same for e.g. relative humidity, rainfall etc.</p>

<h4 id="22-histograms">2.2 Histograms</h4>

<p>Lets look at one more kind of plot. If we want to look at the frequency of an 
event occuring, a histogram can be a good choice. The observed values get binned
in certain intervals and on the y-axis we count, how often this value occurs in 
the data. We can use that e.g. to get an overview of the dominant wind direction.</p>

<p>First we create a new dataframe that extracts only the wind-direction and wind-speed
information from the site data:</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wind_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="w">
  </span><span class="n">ws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site_daily_aggr</span><span class="o">$</span><span class="nb">F</span><span class="p">,</span><span class="w">
  </span><span class="n">wd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_site_daily_aggr</span><span class="o">$</span><span class="n">WD</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Now we create the histogram:</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WD_figure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">wind_data</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">wd</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_histogram</span><span class="p">()</span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"wind direction [°]"</span><span class="p">)</span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Wind direction in Amtsvenn"</span><span class="p">)</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">WD_figure</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>You can look at some further customization options in the documentation or for example here: 
<a href="http://www.sthda.com/english/wiki/ggplot2-histogram-plot-quick-start-guide-r-software-and-data-visualization">Link: sthda.com Intro to Data Visualization</a></p>


        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://instagram.com/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Data Analysis for Ecologists. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
